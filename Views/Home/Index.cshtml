@model IEnumerable<Townsquare.Models.Event>

@{
    ViewData["Title"] = "Home";
}

<div class="featured-section">

    <img src="~/images/home.png" class="featured-image" alt="Main section image" />

    <div class="featured-overlay"></div>

    <div class="featured-content">
        <h1>Christmas in Borås</h1>
        <p>
            Borås during winter offers lights, cold weather and a peaceful atmosphere.
        </p>
    </div>

</div>


<div class="home-header-row">
    <h2 class="home-section-title">Upcoming Events</h2>

    <form method="get" class="home-filters">

        <input type="text"
               name="search"
               placeholder="Search"
               value="@Context.Request.Query["search"]"
               class="home-search" />

        <select name="category" class="home-select">
            <option value="">Event Type</option>
            <option>Music</option>
            <option>Food & Drinks</option>
            <option>Sports</option>
            <option>Arts & Culture</option>
            <option>Workshops</option>
            <option>Charity</option>
            <option>Technology</option>
            <option>Networking</option>
            <option>Other</option>
        </select>

        <select name="city" class="home-select">
            <option value="">City</option>

            @foreach (var c in ViewBag.Cities as List<string>)
            {
                <option value="@c" selected="@(Context.Request.Query["city"] == c ? "selected" : null)">
                    @c
                </option>
            }
        </select>

        <button type="submit" class="home-search-btn">
            <img src="~/icons/search.svg" />
        </button>

    </form>
</div>


@if (!Model.Any())
{
    <div class="home-empty">
        <h3>No events found</h3>
        <p>Try adjusting the filters or check back later.</p>
    </div>
}
else
{
    <div class="events-grid">

        @foreach (var ev in Model)
        {
            <div class="event-card card">
                <div class="event-card-banner">
                    <img src="@ev.ImageUrl" alt="@ev.Title" />
                </div>

                <div class="event-card-container">
                    <div class="event-card-info-container">
                        <div class="event-card-info">
                            <img src="~/icons/calendar.svg" class="event-icon" />
                            @ev.Date.ToString("yyyy-MM-dd")
                        </div>

                        <div class="event-card-info">
                            <img src="~/icons/clock.svg" class="event-icon" />
                            @ev.Date.ToString("HH:mm")
                        </div>
                    </div>

                    <div class="event-card-attending">
                        @ev.Rsvps.Count attending
                    </div>
                </div>

                <h3 class="event-card-title">@ev.Title</h3>

                <p class="event-card-description">@ev.Description</p>

                <div class="event-card-buttons">
                    <a asp-controller="Event"
                       asp-action="Details"
                       asp-route-id="@ev.Id"
                       class="event-card-btn">
                        View Details
                    </a>
                </div>

            </div>
        }

    </div>
}
